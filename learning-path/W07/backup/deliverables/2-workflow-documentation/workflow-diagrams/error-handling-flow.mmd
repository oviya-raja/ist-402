graph TD
    ERROR[Error Detected] --> TYPE{Error Type?}
    
    TYPE -->|Input Validation| INPUT[Input Error Handler]
    TYPE -->|KB Retrieval| KB[Retrieval Error Handler]
    TYPE -->|Processing| PROC[Processing Error Handler]
    TYPE -->|Use Case Routing| ROUTE[Routing Error Handler]
    TYPE -->|Edge Case| EDGE[Edge Case Handler]
    
    INPUT --> INPUT1{Missing Company?}
    INPUT1 -->|Yes| REQ1[Request Company List]
    INPUT1 -->|No| INPUT2{Invalid Company?}
    INPUT2 -->|Yes| SUGGEST1[Suggest Corrections]
    INPUT2 -->|No| INPUT3{Incomplete Profile?}
    INPUT3 -->|Yes| REQ2[Request Missing Info]
    INPUT3 -->|No| CONTINUE1[Continue Processing]
    
    KB --> KB1{No Info Found?}
    KB1 -->|Yes| ACK1[Acknowledge Limitation]
    KB1 -->|No| KB2{Ambiguous Query?}
    KB2 -->|Yes| CLARIFY1[Ask Clarifying Questions]
    KB2 -->|No| CONTINUE2[Use General Knowledge]
    
    PROC --> PROC1{Calculation Error?}
    PROC1 -->|Yes| QUAL[Use Qualitative Assessment]
    PROC1 -->|No| PROC2{Comparison Error?}
    PROC2 -->|Yes| INDIV[Analyze Individually First]
    PROC2 -->|No| CONTINUE3[Continue Processing]
    
    ROUTE --> ROUTE1{Unclear Use Case?}
    ROUTE1 -->|Yes| LIST[List Use Case Options]
    ROUTE1 -->|No| ROUTE2{Multiple Use Cases?}
    ROUTE2 -->|Yes| SEQ[Process Sequentially]
    ROUTE2 -->|No| CONTINUE4[Route to Use Case]
    
    EDGE --> EDGE1{High Fitment 95%+?}
    EDGE1 -->|Yes| CELEBRATE[Celebrate + Minor Gaps]
    EDGE1 -->|No| EDGE2{Low Fitment <50%?}
    EDGE2 -->|Yes| SUPPORT[Supportive + Learning Path]
    EDGE2 -->|No| EDGE3{Conflicting Info?}
    EDGE3 -->|Yes| NOTE[Note Conflict + Proceed]
    EDGE3 -->|No| CONTINUE5[Continue Processing]
    
    REQ1 --> CONTINUE1
    SUGGEST1 --> CONTINUE1
    REQ2 --> CONTINUE1
    ACK1 --> CONTINUE2
    CLARIFY1 --> CONTINUE2
    QUAL --> CONTINUE3
    INDIV --> CONTINUE3
    LIST --> CONTINUE4
    SEQ --> CONTINUE4
    CELEBRATE --> OUTPUT
    SUPPORT --> OUTPUT
    NOTE --> OUTPUT
    
    CONTINUE1 --> OUTPUT
    CONTINUE2 --> OUTPUT
    CONTINUE3 --> OUTPUT
    CONTINUE4 --> OUTPUT
    CONTINUE5 --> OUTPUT
    
    OUTPUT[Generate Helpful Response]
    
    style ERROR fill:#f8d7da
    style OUTPUT fill:#d4edda
    style TYPE fill:#fff3cd

---

## ASCII DIAGRAM VERSION

```
┌──────────────────┐
│ ERROR DETECTED   │
└────────┬─────────┘
         │
         ▼
┌──────────────────┐
│ ERROR TYPE?      │
└──────┬───────────┘
       │
   ┌───┴───┬──────┬──────┬──────┐
   │       │      │      │      │
   ▼       ▼      ▼      ▼      ▼
Input   KB     Process Route  Edge
Valid   Retrieval          Case
   │       │      │      │      │
   │       │      │      │      │
   ▼       ▼      ▼      ▼      ▼
┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐
│     │ │     │ │     │ │     │ │     │
│     │ │     │ │     │ │     │ │     │
│     │ │     │ │     │ │     │ │     │
└──┬──┘ └──┬──┘ └──┬──┘ └──┬──┘ └──┬──┘
   │       │      │      │      │
   │       │      │      │      │
   │       │      │      │      │
   │       │      │      │      │
   │       │      │      │      │
   └───┬───┴──────┴──────┴──────┘
       │
       ▼
┌──────────────────┐
│ CONTINUE         │
│ PROCESSING       │
└──────┬───────────┘
       │
       ▼
┌──────────────────┐
│ GENERATE HELPFUL │
│ RESPONSE         │
└──────────────────┘

DETAILED ERROR HANDLING:

Input Validation Errors:
  Missing Company → Request Company List
  Invalid Company → Suggest Corrections
  Incomplete Profile → Request Missing Info

KB Retrieval Errors:
  No Info Found → Acknowledge Limitation + General Guidance
  Ambiguous Query → Ask Clarifying Questions

Processing Errors:
  Calculation Error → Use Qualitative Assessment
  Comparison Error → Analyze Individually First

Routing Errors:
  Unclear Use Case → List Use Case Options
  Multiple Use Cases → Process Sequentially

Edge Cases:
  High Fitment (95%+) → Celebrate + Minor Gaps
  Low Fitment (<50%) → Supportive + Learning Path
  Conflicting Info → Note Conflict + Proceed
```

